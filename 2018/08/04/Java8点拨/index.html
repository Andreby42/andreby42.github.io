<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Java,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="java8的一些知识点的记录，写的比较糙，能理解就ok">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java8点拨">
<meta property="og:url" content="http://yoursite.com/2018/08/04/Java8点拨/index.html">
<meta property="og:site_name" content="Andreby的随记">
<meta property="og:description" content="java8的一些知识点的记录，写的比较糙，能理解就ok">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-01-22T11:07:38.300Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java8点拨">
<meta name="twitter:description" content="java8的一些知识点的记录，写的比较糙，能理解就ok">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/04/Java8点拨/">





  <title>Java8点拨 | Andreby的随记</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Andreby的随记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">如果有什么需要明天做的事 最好现在开始做</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/04/Java8点拨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Andreby">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/p829173265.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Andreby的随记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java8点拨</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-04T10:30:52+08:00">
                2018-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>java8的一些知识点的记录，写的比较糙，能理解就ok<a id="more"></a></p>
<h4 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h4><ul>
<li>lambda表达式可以有零个，一个或者多个参数</li>
<li>可以显式声明参数的类型，也可以从上下中推断参数类型</li>
<li>多个参数必须包含在括号中，并用逗号分隔，空括号用于表示零个参数</li>
<li>当只有一个参数时，如果推断它的类型，可以不用括号</li>
<li>lambda表达式的函数体可以包含零个，一个或者多个语句</li>
<li>如果lambda表达式函数提只有一行，那么就可以不用大括号，匿名函数的返回类型与函数体表达式的返回类型相同。当函数提中大于一行代码则需要用大括号包含。</li>
<li>谓词复合，用于多条件判断。<ul>
<li>negate  Predicate的非</li>
<li>and Predicate的与</li>
<li>or predicate的或</li>
</ul>
</li>
<li>函数复合,用于Fuction接口所代表的Lambda表达式的符合<ul>
<li>andThen 很明了的函数，aExpression.andThen(bExpression）相当于 数学上的 b(a(x))</li>
<li>compose aExpression.compose(bExpression) 相当于数学上的  a（b(x)）</li>
</ul>
</li>
</ul>
<hr>
<h4 id="函数式编程中的方法引用。"><a href="#函数式编程中的方法引用。" class="headerlink" title="函数式编程中的方法引用。"></a>函数式编程中的方法引用。</h4><table>
<thead>
<tr>
<th>方法引用</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>静态方法引用</td>
<td>用于引用类的静态方法</td>
<td>Math::max等于原先的Math.max（）</td>
</tr>
<tr>
<td>实例对象引用方法</td>
<td>使用实例对象引用来调用实例方法</td>
<td>System.out::println=System.out.println()</td>
</tr>
<tr>
<td>从类中引用实例方法（其实还是实例调用方法吧）</td>
<td>在上下文提供的对象的医用上调用实例方法</td>
<td>String::length相当于str.length</td>
</tr>
<tr>
<td>引用构造函数</td>
<td>引用构造函数，创建实例对象</td>
<td>HashMap：：new 等于 new  HashMap()</td>
</tr>
</tbody></table>
<p>这些方法引用其实在函数式编程语言 Rust 中都已经存在，lisp中也有。</p>
<hr>
<h4 id="默认方法与静态方法："><a href="#默认方法与静态方法：" class="headerlink" title="默认方法与静态方法："></a>默认方法与静态方法：</h4><p>接口新增了default方法和static方法。</p>
<ul>
<li><p>静态方法，只能通过接口调用，不可以通过实现类的类名或实现类的实例进行调用。最简单的提供工厂的实现功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.space.default_method;</span><br><span class="line"></span><br><span class="line">public interface Caculate &#123;</span><br><span class="line">	int add(int a, int b);</span><br><span class="line"></span><br><span class="line">	int subtract(int a, int b);</span><br><span class="line"></span><br><span class="line">	int divide(int a, int b);</span><br><span class="line"></span><br><span class="line">	int muti(int a, int b);</span><br><span class="line">	</span><br><span class="line">	default int mod (int a , int b ) &#123;</span><br><span class="line">		return a%b;</span><br><span class="line">	&#125;</span><br><span class="line">	public static Caculate getCaculateImplInstance() &#123;</span><br><span class="line">		return new CaculateImpl();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>默认方法，只能通过接口的实现类来调用,可以避免新的功能添加導致对现有功能的困扰。方便api的演进</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.space.default_method;</span><br><span class="line"></span><br><span class="line">public interface Caculate &#123;</span><br><span class="line">	int add(int a, int b);</span><br><span class="line"></span><br><span class="line">	int subtract(int a, int b);</span><br><span class="line"></span><br><span class="line">	int divide(int a, int b);</span><br><span class="line"></span><br><span class="line">	int muti(int a, int b);</span><br><span class="line">	</span><br><span class="line">	default int mod (int a , int b ) &#123;</span><br><span class="line">		return a%b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package com.space.default_method;</span><br><span class="line"></span><br><span class="line">public class CaculateImpl implements Caculate &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int add(int a, int b) &#123;</span><br><span class="line">		return a+b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int subtract(int a, int b) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		return a-b;	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int divide(int a, int b) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		return a/b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int muti(int a, int b) &#123;</span><br><span class="line">		return a*b;</span><br><span class="line">	&#125;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Caculate caculate  = new CaculateImpl();</span><br><span class="line">		int mod = caculate.mod(100, 3);</span><br><span class="line">		System.out.println(mod);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>PS:</strong> 接口冲突，方法冲突 的解决：</p>
<ul>
<li>类中的方法优先级别最高，类或者父类中的声明的方法优先级高于任何声明为默认的方法的优先级</li>
<li>如果无法通过上述条件进行判断，那么子类接口的优先级更高，函数签名相同时，优先选择拥有最具体实现的默认方法的接口，</li>
<li>如果上述条件还是无法判断的话，继承多个接口的类必须通过显式覆盖和调用期望的方法，显式的选择使用哪一个默认方法的实现。</li>
</ul>
</li>
</ul>
<h4 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h4><ul>
<li>函数式接口也称作单例抽象方法接口（SAM接口），<strong>接口中只允许一个抽象方法</strong>,@FunctionalInterface注解会在你注解的接口违反函数式几口的约定时提示一个编译错误。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface  MyFunctionalInterface &#123;</span><br><span class="line">    public void firstFunction（）；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><p>常用函数式接口</p>
<ul>
<li><p>Predicate函数式接口:功能判断输入的对象是否符合某个条件。官方文档解释到：<code>Determines if the input object matches some criteria</code></p>
<p>原始类型特化：IntPredicate,LongPredicate, DoublePredicate </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br><span class="line">package java.util.function;</span><br><span class="line"></span><br><span class="line">import java.util.Objects;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Represents a predicate (boolean-valued function) of one argument.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span><br><span class="line"> * whose functional method is &#123;@link #test(Object)&#125;.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of the input to the predicate</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">@FunctionalInterface</span><br><span class="line">public interface Predicate&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Evaluates this predicate on the given argument.</span><br><span class="line">     *</span><br><span class="line">     * @param t the input argument</span><br><span class="line">     * @return &#123;@code true&#125; if the input argument matches the predicate,</span><br><span class="line">     * otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    boolean test(T t);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a composed predicate that represents a short-circuiting logical</span><br><span class="line">     * AND of this predicate and another.  When evaluating the composed</span><br><span class="line">     * predicate, if this predicate is &#123;@code false&#125;, then the &#123;@code other&#125;</span><br><span class="line">     * predicate is not evaluated.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span><br><span class="line">     * to the caller; if evaluation of this predicate throws an exception, the</span><br><span class="line">     * &#123;@code other&#125; predicate will not be evaluated.</span><br><span class="line">     *</span><br><span class="line">     * @param other a predicate that will be logically-ANDed with this</span><br><span class="line">     *              predicate</span><br><span class="line">     * @return a composed predicate that represents the short-circuiting logical</span><br><span class="line">     * AND of this predicate and the &#123;@code other&#125; predicate</span><br><span class="line">     * @throws NullPointerException if other is null</span><br><span class="line">     */</span><br><span class="line">    default Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) &#123;</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        return (t) -&gt; test(t) &amp;&amp; other.test(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a predicate that represents the logical negation of this</span><br><span class="line">     * predicate.</span><br><span class="line">     *</span><br><span class="line">     * @return a predicate that represents the logical negation of this</span><br><span class="line">     * predicate</span><br><span class="line">     */</span><br><span class="line">    default Predicate&lt;T&gt; negate() &#123;</span><br><span class="line">        return (t) -&gt; !test(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a composed predicate that represents a short-circuiting logical</span><br><span class="line">     * OR of this predicate and another.  When evaluating the composed</span><br><span class="line">     * predicate, if this predicate is &#123;@code true&#125;, then the &#123;@code other&#125;</span><br><span class="line">     * predicate is not evaluated.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span><br><span class="line">     * to the caller; if evaluation of this predicate throws an exception, the</span><br><span class="line">     * &#123;@code other&#125; predicate will not be evaluated.</span><br><span class="line">     *</span><br><span class="line">     * @param other a predicate that will be logically-ORed with this</span><br><span class="line">     *              predicate</span><br><span class="line">     * @return a composed predicate that represents the short-circuiting logical</span><br><span class="line">     * OR of this predicate and the &#123;@code other&#125; predicate</span><br><span class="line">     * @throws NullPointerException if other is null</span><br><span class="line">     */</span><br><span class="line">    default Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) &#123;</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        return (t) -&gt; test(t) || other.test(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a predicate that tests if two arguments are equal according</span><br><span class="line">     * to &#123;@link Objects#equals(Object, Object)&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of arguments to the predicate</span><br><span class="line">     * @param targetRef the object reference with which to compare for equality,</span><br><span class="line">     *               which may be &#123;@code null&#125;</span><br><span class="line">     * @return a predicate that tests if two arguments are equal according</span><br><span class="line">     * to &#123;@link Objects#equals(Object, Object)&#125;</span><br><span class="line">     */</span><br><span class="line">    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) &#123;</span><br><span class="line">        return (null == targetRef)</span><br><span class="line">                ? Objects::isNull</span><br><span class="line">                : object -&gt; targetRef.equals(object);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Consumer函数式接口： <strong>表示一个接受单个输入参数并且没有返回值的操作</strong>。不像其它函数式接口，Consumer 接口期望执行带有副作用的操作 (Consumer 的操作可能会更改输入参数的内部状态)。官方文档：<code>An operation which accepts a single input argument and returns no result. Unlike most other functional interfaces, Consumer is expected to operate via side-effects.</code> 也就是void。</p>
<p>原始类型特化:</p>
<p>IntConsumer,LongConsumer, DoubleConsumer </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br><span class="line">package java.util.function;</span><br><span class="line"></span><br><span class="line">import java.util.Objects;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Represents an operation that accepts a single input argument and returns no</span><br><span class="line"> * result. Unlike most other functional interfaces, &#123;@code Consumer&#125; is expected</span><br><span class="line"> * to operate via side-effects.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span><br><span class="line"> * whose functional method is &#123;@link #accept(Object)&#125;.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of the input to the operation</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">@FunctionalInterface</span><br><span class="line">public interface Consumer&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs this operation on the given argument.</span><br><span class="line">     *</span><br><span class="line">     * @param t the input argument</span><br><span class="line">     */</span><br><span class="line">    void accept(T t);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a composed &#123;@code Consumer&#125; that performs, in sequence, this</span><br><span class="line">     * operation followed by the &#123;@code after&#125; operation. If performing either</span><br><span class="line">     * operation throws an exception, it is relayed to the caller of the</span><br><span class="line">     * composed operation.  If performing this operation throws an exception,</span><br><span class="line">     * the &#123;@code after&#125; operation will not be performed.</span><br><span class="line">     *</span><br><span class="line">     * @param after the operation to perform after this operation</span><br><span class="line">     * @return a composed &#123;@code Consumer&#125; that performs in sequence this</span><br><span class="line">     * operation followed by the &#123;@code after&#125; operation</span><br><span class="line">     * @throws NullPointerException if &#123;@code after&#125; is null</span><br><span class="line">     */</span><br><span class="line">    default Consumer&lt;T&gt; andThen(Consumer&lt;? super T&gt; after) &#123;</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        return (T t) -&gt; &#123; accept(t); after.accept(t); &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Supplier 函数式接口：顾名思义，就是提供者的意思，可以简单理解为工厂，<strong>不接收参数，只提供返回值</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br><span class="line">package java.util.function;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Represents a supplier of results.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;There is no requirement that a new or distinct result be returned each</span><br><span class="line"> * time the supplier is invoked.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span><br><span class="line"> * whose functional method is &#123;@link #get()&#125;.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of results supplied by this supplier</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">@FunctionalInterface</span><br><span class="line">public interface Supplier&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Gets a result.</span><br><span class="line">     *</span><br><span class="line">     * @return a result</span><br><span class="line">     */</span><br><span class="line">    T get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Function函数式接口：<strong>接受一定数量的参数 同时提供一个返回结果</strong>  ,</p>
<p>原始类型特化：</p>
<p><code>IntFunction&lt;R&gt;, IntToDoubleFunction,</code>  <code>IntToLongFunction, LongFunction&lt;R&gt;,</code>  <code>LongToDoubleFunction, LongToIntFunction,</code>  <code>DoubleFunction&lt;R&gt;, ToIntFunction&lt;T&gt;,</code>  <code>ToDoubleFunction&lt;T&gt;, ToLongFunction&lt;T&gt;</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 2010, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br><span class="line">package java.util.function;</span><br><span class="line"></span><br><span class="line">import java.util.Objects;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Represents a function that accepts one argument and produces a result.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt;</span><br><span class="line"> * whose functional method is &#123;@link #apply(Object)&#125;.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of the input to the function</span><br><span class="line"> * @param &lt;R&gt; the type of the result of the function</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">@FunctionalInterface</span><br><span class="line">public interface Function&lt;T, R&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Applies this function to the given argument.</span><br><span class="line">     *</span><br><span class="line">     * @param t the function argument</span><br><span class="line">     * @return the function result</span><br><span class="line">     */</span><br><span class="line">    R apply(T t);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a composed function that first applies the &#123;@code before&#125;</span><br><span class="line">     * function to its input, and then applies this function to the result.</span><br><span class="line">     * If evaluation of either function throws an exception, it is relayed to</span><br><span class="line">     * the caller of the composed function.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;V&gt; the type of input to the &#123;@code before&#125; function, and to the</span><br><span class="line">     *           composed function</span><br><span class="line">     * @param before the function to apply before this function is applied</span><br><span class="line">     * @return a composed function that first applies the &#123;@code before&#125;</span><br><span class="line">     * function and then applies this function</span><br><span class="line">     * @throws NullPointerException if before is null</span><br><span class="line">     *</span><br><span class="line">     * @see #andThen(Function)</span><br><span class="line">     */</span><br><span class="line">    default &lt;V&gt; Function&lt;V, R&gt; compose(Function&lt;? super V, ? extends T&gt; before) &#123;</span><br><span class="line">        Objects.requireNonNull(before);</span><br><span class="line">        return (V v) -&gt; apply(before.apply(v));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a composed function that first applies this function to</span><br><span class="line">     * its input, and then applies the &#123;@code after&#125; function to the result.</span><br><span class="line">     * If evaluation of either function throws an exception, it is relayed to</span><br><span class="line">     * the caller of the composed function.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;V&gt; the type of output of the &#123;@code after&#125; function, and of the</span><br><span class="line">     *           composed function</span><br><span class="line">     * @param after the function to apply after this function is applied</span><br><span class="line">     * @return a composed function that first applies this function and then</span><br><span class="line">     * applies the &#123;@code after&#125; function</span><br><span class="line">     * @throws NullPointerException if after is null</span><br><span class="line">     *</span><br><span class="line">     * @see #compose(Function)</span><br><span class="line">     */</span><br><span class="line">    default &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) &#123;</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        return (T t) -&gt; after.apply(apply(t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a function that always returns its input argument.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of the input and output objects to the function</span><br><span class="line">     * @return a function that always returns its input argument</span><br><span class="line">     */</span><br><span class="line">    static &lt;T&gt; Function&lt;T, T&gt; identity() &#123;</span><br><span class="line">        return t -&gt; t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Operator函数式接口:  运算符函数接口，有<code>UnaryOperator&lt;T&gt;和</code>BinaryOperator<t>``这两个接口。只有一个泛型，那么意思就是说 入参和返回只有一种类型。</t></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* UnaryOperator 接收一个参数 返回同类型结果。</span><br><span class="line">*/</span><br><span class="line">    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5, 6);</span><br><span class="line">    UnaryOperator&lt;Integer&gt; unaryOpt = i -&gt; i * i;</span><br><span class="line">    unaryOperatorFun(unaryOpt, list).forEach(x -&gt; &#123;</span><br><span class="line">    System.out.println(x);</span><br><span class="line">&#125;);</span><br><span class="line">private static List&lt;Integer&gt; unaryOperatorFun(UnaryOperator&lt;Integer&gt; unaryOpt, List&lt;Integer&gt; list) &#123;</span><br><span class="line">    List&lt;Integer&gt; uniList = new ArrayList&lt;&gt;();</span><br><span class="line">    list.forEach(i -&gt; uniList.add(unaryOpt.apply(i)));</span><br><span class="line">    return uniList;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * BinaryOperator</span><br><span class="line"> */</span><br><span class="line">Map&lt;String, String&gt; map = new HashMap();</span><br><span class="line">map.put(&quot;1&quot;, &quot;23&quot;);</span><br><span class="line">map.put(&quot;12&quot;, &quot;2365&quot;);</span><br><span class="line">map.put(&quot;13&quot;, &quot;231&quot;);</span><br><span class="line">map.put(&quot;14&quot;, &quot;232&quot;);</span><br><span class="line">BinaryOperator&lt;String&gt; bo = (s1, s2) -&gt; s1 + s2;</span><br><span class="line">binaryOperatorFun(bo, map).forEach(x-&gt;System.out.println(x));</span><br><span class="line"></span><br><span class="line">private static List&lt;String&gt; binaryOperatorFun(BinaryOperator&lt;String&gt; bo, Map&lt;String, String&gt; map) &#123;</span><br><span class="line">    List&lt;String&gt; result = new ArrayList&lt;&gt;();</span><br><span class="line">    map.forEach((s1,s2)-&gt;result.add(bo.apply(s1, s2)));</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h4 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h4><p>很像Rust中的Option</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br><span class="line">package java.util;</span><br><span class="line"></span><br><span class="line">import java.util.function.Consumer;</span><br><span class="line">import java.util.function.Function;</span><br><span class="line">import java.util.function.Predicate;</span><br><span class="line">import java.util.function.Supplier;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * A container object which may or may not contain a non-null value.</span><br><span class="line"> * If a value is present, &#123;@code isPresent()&#125; will return &#123;@code true&#125; and</span><br><span class="line"> * &#123;@code get()&#125; will return the value.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Additional methods that depend on the presence or absence of a contained</span><br><span class="line"> * value are provided, such as &#123;@link #orElse(java.lang.Object) orElse()&#125;</span><br><span class="line"> * (return a default value if value not present) and</span><br><span class="line"> * &#123;@link #ifPresent(java.util.function.Consumer) ifPresent()&#125; (execute a block</span><br><span class="line"> * of code if the value is present).</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;This is a &lt;a href=&quot;../lang/doc-files/ValueBased.html&quot;&gt;value-based&lt;/a&gt;</span><br><span class="line"> * class; use of identity-sensitive operations (including reference equality</span><br><span class="line"> * (&#123;@code ==&#125;), identity hash code, or synchronization) on instances of</span><br><span class="line"> * &#123;@code Optional&#125; may have unpredictable results and should be avoided.</span><br><span class="line"> *</span><br><span class="line"> * @since 1.8</span><br><span class="line"> */</span><br><span class="line">public final class Optional&lt;T&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * Common instance for &#123;@code empty()&#125;.</span><br><span class="line">     */</span><br><span class="line">    private static final Optional&lt;?&gt; EMPTY = new Optional&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If non-null, the value; if null, indicates no value is present</span><br><span class="line">     */</span><br><span class="line">    private final T value;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Constructs an empty instance.</span><br><span class="line">     *</span><br><span class="line">     * @implNote Generally only one empty instance, &#123;@link Optional#EMPTY&#125;,</span><br><span class="line">     * should exist per VM.</span><br><span class="line">     */</span><br><span class="line">    private Optional() &#123;</span><br><span class="line">        this.value = null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an empty &#123;@code Optional&#125; instance.  No value is present for this</span><br><span class="line">     * Optional.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote Though it may be tempting to do so, avoid testing if an object</span><br><span class="line">     * is empty by comparing with &#123;@code ==&#125; against instances returned by</span><br><span class="line">     * &#123;@code Option.empty()&#125;. There is no guarantee that it is a singleton.</span><br><span class="line">     * Instead, use &#123;@link #isPresent()&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; Type of the non-existent value</span><br><span class="line">     * @return an empty &#123;@code Optional&#125;</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Optional&lt;T&gt; empty() &#123;</span><br><span class="line">        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">        Optional&lt;T&gt; t = (Optional&lt;T&gt;) EMPTY;</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Constructs an instance with the value present.</span><br><span class="line">     *</span><br><span class="line">     * @param value the non-null value to be present</span><br><span class="line">     * @throws NullPointerException if value is null</span><br><span class="line">     */</span><br><span class="line">    private Optional(T value) &#123;</span><br><span class="line">        this.value = Objects.requireNonNull(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code Optional&#125; with the specified present non-null value.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the class of the value</span><br><span class="line">     * @param value the value to be present, which must be non-null</span><br><span class="line">     * @return an &#123;@code Optional&#125; with the value present</span><br><span class="line">     * @throws NullPointerException if value is null</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Optional&lt;T&gt; of(T value) &#123;</span><br><span class="line">        return new Optional&lt;&gt;(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code Optional&#125; describing the specified value, if non-null,</span><br><span class="line">     * otherwise returns an empty &#123;@code Optional&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the class of the value</span><br><span class="line">     * @param value the possibly-null value to describe</span><br><span class="line">     * @return an &#123;@code Optional&#125; with a present value if the specified value</span><br><span class="line">     * is non-null, otherwise an empty &#123;@code Optional&#125;</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value) &#123;</span><br><span class="line">        return value == null ? empty() : of(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If a value is present in this &#123;@code Optional&#125;, returns the value,</span><br><span class="line">     * otherwise throws &#123;@code NoSuchElementException&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @return the non-null value held by this &#123;@code Optional&#125;</span><br><span class="line">     * @throws NoSuchElementException if there is no value present</span><br><span class="line">     *</span><br><span class="line">     * @see Optional#isPresent()</span><br><span class="line">     */</span><br><span class="line">    public T get() &#123;</span><br><span class="line">        if (value == null) &#123;</span><br><span class="line">            throw new NoSuchElementException(&quot;No value present&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Return &#123;@code true&#125; if there is a value present, otherwise &#123;@code false&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @return &#123;@code true&#125; if there is a value present, otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    public boolean isPresent() &#123;</span><br><span class="line">        return value != null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If a value is present, invoke the specified consumer with the value,</span><br><span class="line">     * otherwise do nothing.</span><br><span class="line">     *</span><br><span class="line">     * @param consumer block to be executed if a value is present</span><br><span class="line">     * @throws NullPointerException if value is present and &#123;@code consumer&#125; is</span><br><span class="line">     * null</span><br><span class="line">     */</span><br><span class="line">    public void ifPresent(Consumer&lt;? super T&gt; consumer) &#123;</span><br><span class="line">        if (value != null)</span><br><span class="line">            consumer.accept(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If a value is present, and the value matches the given predicate,</span><br><span class="line">     * return an &#123;@code Optional&#125; describing the value, otherwise return an</span><br><span class="line">     * empty &#123;@code Optional&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param predicate a predicate to apply to the value, if present</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing the value of this &#123;@code Optional&#125;</span><br><span class="line">     * if a value is present and the value matches the given predicate,</span><br><span class="line">     * otherwise an empty &#123;@code Optional&#125;</span><br><span class="line">     * @throws NullPointerException if the predicate is null</span><br><span class="line">     */</span><br><span class="line">    public Optional&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate) &#123;</span><br><span class="line">        Objects.requireNonNull(predicate);</span><br><span class="line">        if (!isPresent())</span><br><span class="line">            return this;</span><br><span class="line">        else</span><br><span class="line">            return predicate.test(value) ? this : empty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If a value is present, apply the provided mapping function to it,</span><br><span class="line">     * and if the result is non-null, return an &#123;@code Optional&#125; describing the</span><br><span class="line">     * result.  Otherwise return an empty &#123;@code Optional&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote This method supports post-processing on optional values, without</span><br><span class="line">     * the need to explicitly check for a return status.  For example, the</span><br><span class="line">     * following code traverses a stream of file names, selects one that has</span><br><span class="line">     * not yet been processed, and then opens that file, returning an</span><br><span class="line">     * &#123;@code Optional&lt;FileInputStream&gt;&#125;:</span><br><span class="line">     *</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Optional&lt;FileInputStream&gt; fis =</span><br><span class="line">     *         names.stream().filter(name -&gt; !isProcessedYet(name))</span><br><span class="line">     *                       .findFirst()</span><br><span class="line">     *                       .map(name -&gt; new FileInputStream(name));</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * Here, &#123;@code findFirst&#125; returns an &#123;@code Optional&lt;String&gt;&#125;, and then</span><br><span class="line">     * &#123;@code map&#125; returns an &#123;@code Optional&lt;FileInputStream&gt;&#125; for the desired</span><br><span class="line">     * file if one exists.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;U&gt; The type of the result of the mapping function</span><br><span class="line">     * @param mapper a mapping function to apply to the value, if present</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing the result of applying a mapping</span><br><span class="line">     * function to the value of this &#123;@code Optional&#125;, if a value is present,</span><br><span class="line">     * otherwise an empty &#123;@code Optional&#125;</span><br><span class="line">     * @throws NullPointerException if the mapping function is null</span><br><span class="line">     */</span><br><span class="line">    public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) &#123;</span><br><span class="line">        Objects.requireNonNull(mapper);</span><br><span class="line">        if (!isPresent())</span><br><span class="line">            return empty();</span><br><span class="line">        else &#123;</span><br><span class="line">            return Optional.ofNullable(mapper.apply(value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * If a value is present, apply the provided &#123;@code Optional&#125;-bearing</span><br><span class="line">     * mapping function to it, return that result, otherwise return an empty</span><br><span class="line">     * &#123;@code Optional&#125;.  This method is similar to &#123;@link #map(Function)&#125;,</span><br><span class="line">     * but the provided mapper is one whose result is already an &#123;@code Optional&#125;,</span><br><span class="line">     * and if invoked, &#123;@code flatMap&#125; does not wrap it with an additional</span><br><span class="line">     * &#123;@code Optional&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;U&gt; The type parameter to the &#123;@code Optional&#125; returned by</span><br><span class="line">     * @param mapper a mapping function to apply to the value, if present</span><br><span class="line">     *           the mapping function</span><br><span class="line">     * @return the result of applying an &#123;@code Optional&#125;-bearing mapping</span><br><span class="line">     * function to the value of this &#123;@code Optional&#125;, if a value is present,</span><br><span class="line">     * otherwise an empty &#123;@code Optional&#125;</span><br><span class="line">     * @throws NullPointerException if the mapping function is null or returns</span><br><span class="line">     * a null result</span><br><span class="line">     */</span><br><span class="line">    public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) &#123;</span><br><span class="line">        Objects.requireNonNull(mapper);</span><br><span class="line">        if (!isPresent())</span><br><span class="line">            return empty();</span><br><span class="line">        else &#123;</span><br><span class="line">            return Objects.requireNonNull(mapper.apply(value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Return the value if present, otherwise return &#123;@code other&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param other the value to be returned if there is no value present, may</span><br><span class="line">     * be null</span><br><span class="line">     * @return the value, if present, otherwise &#123;@code other&#125;</span><br><span class="line">     */</span><br><span class="line">    public T orElse(T other) &#123;</span><br><span class="line">        return value != null ? value : other;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Return the value if present, otherwise invoke &#123;@code other&#125; and return</span><br><span class="line">     * the result of that invocation.</span><br><span class="line">     *</span><br><span class="line">     * @param other a &#123;@code Supplier&#125; whose result is returned if no value</span><br><span class="line">     * is present</span><br><span class="line">     * @return the value if present otherwise the result of &#123;@code other.get()&#125;</span><br><span class="line">     * @throws NullPointerException if value is not present and &#123;@code other&#125; is</span><br><span class="line">     * null</span><br><span class="line">     */</span><br><span class="line">    public T orElseGet(Supplier&lt;? extends T&gt; other) &#123;</span><br><span class="line">        return value != null ? value : other.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Return the contained value, if present, otherwise throw an exception</span><br><span class="line">     * to be created by the provided supplier.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote A method reference to the exception constructor with an empty</span><br><span class="line">     * argument list can be used as the supplier. For example,</span><br><span class="line">     * &#123;@code IllegalStateException::new&#125;</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;X&gt; Type of the exception to be thrown</span><br><span class="line">     * @param exceptionSupplier The supplier which will return the exception to</span><br><span class="line">     * be thrown</span><br><span class="line">     * @return the present value</span><br><span class="line">     * @throws X if there is no value present</span><br><span class="line">     * @throws NullPointerException if no value is present and</span><br><span class="line">     * &#123;@code exceptionSupplier&#125; is null</span><br><span class="line">     */</span><br><span class="line">    public &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) throws X &#123;</span><br><span class="line">        if (value != null) &#123;</span><br><span class="line">            return value;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            throw exceptionSupplier.get();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Indicates whether some other object is &quot;equal to&quot; this Optional. The</span><br><span class="line">     * other object is considered equal if:</span><br><span class="line">     * &lt;ul&gt;</span><br><span class="line">     * &lt;li&gt;it is also an &#123;@code Optional&#125; and;</span><br><span class="line">     * &lt;li&gt;both instances have no value present or;</span><br><span class="line">     * &lt;li&gt;the present values are &quot;equal to&quot; each other via &#123;@code equals()&#125;.</span><br><span class="line">     * &lt;/ul&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param obj an object to be tested for equality</span><br><span class="line">     * @return &#123;code true&#125; if the other object is &quot;equal to&quot; this object</span><br><span class="line">     * otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object obj) &#123;</span><br><span class="line">        if (this == obj) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (!(obj instanceof Optional)) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Optional&lt;?&gt; other = (Optional&lt;?&gt;) obj;</span><br><span class="line">        return Objects.equals(value, other.value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the hash code value of the present value, if any, or 0 (zero) if</span><br><span class="line">     * no value is present.</span><br><span class="line">     *</span><br><span class="line">     * @return hash code value of the present value or 0 if no value is present</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public int hashCode() &#123;</span><br><span class="line">        return Objects.hashCode(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a non-empty string representation of this Optional suitable for</span><br><span class="line">     * debugging. The exact presentation format is unspecified and may vary</span><br><span class="line">     * between implementations and versions.</span><br><span class="line">     *</span><br><span class="line">     * @implSpec If a value is present the result must include its string</span><br><span class="line">     * representation in the result. Empty and present Optionals must be</span><br><span class="line">     * unambiguously differentiable.</span><br><span class="line">     *</span><br><span class="line">     * @return the string representation of this instance</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return value != null</span><br><span class="line">            ? String.format(&quot;Optional[%s]&quot;, value)</span><br><span class="line">            : &quot;Optional.empty&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>创建Optional对象</p>
<ul>
<li><p>声明一个空的Optional对象 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.empty()；</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个有值的Optional如果你赋值为 null，则会抛出空指针异常。 如果值是 null，则目标 Optional 对象将会是空 (记得值是 absent，不是 null)。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.of(car)；</span><br></pre></td></tr></table></figure>
</li>
<li><p>可接受null值的Optional的创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Car&gt; optCar = Optional.ofNullable(car);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>使用map从Optional中提取和转换值</p>
<pre><code>Optional&lt;Project&gt; ppp = Optional.of(pp);
Optional&lt;Optional&lt;String&gt;&gt; map2 = ppp.map(Project::getAuth);
Optional&lt;String&gt; autss = map2.get();</code></pre> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Person&gt; optPerson = Optional.ofNullable(person）;</span><br><span class="line"></span><br><span class="line">Optional&lt;Car&gt; optcar=optPerson.map(Person::getCar);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用flatMap链接Optional对象,用于处理嵌套的optional,流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OptionalPerson&gt; optPerson = Optional.ofNullable(person）;</span><br><span class="line">Optional&lt;Wheel&gt; optw=optPerson.flatMap（Person::getCar）.map(Car::getWheel());</span><br></pre></td></tr></table></figure>
</li>
<li><p>默认行为及解引用Optional对象。</p>
<ul>
<li><code>get()</code>获取封装的变量，或者抛出NoSuchElementException();</li>
<li><code>orElse(T other)</code>如果Optional对象中不包含值时可以进行提供一个默认值</li>
<li><code>orElseGet（Supplier&lt;? extends T&gt; other）</code>是orElse的延迟嗲用版，Supplier只有在Optional中不含值的时候才执行调用</li>
<li><code>orElseThrow（Supplier&lt;? extends X&gt; exceptionSupplier）</code>和get方法相似，只不过在遭遇对象元素为空的时候会抛出异常，可以定制异常。</li>
<li><code>ifPresent(Consumer &lt;? Super T&gt;)</code> 在变量值存在时执行一个作为参数传入的方法。否则不做任何操作。</li>
</ul>
</li>
<li><p>使用filter剔除特定的值</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; optt = Optional.of(&quot;123&quot;);</span><br><span class="line">optt.filter(s1-&gt;&quot;123&quot;.equals(s1)).ifPresent(x-&gt;System.out.println(x));</span><br></pre></td></tr></table></figure>
</li>
<li><p>以下情况不使用Optional:</p>
<ul>
<li>in the domain model layer (it’s not serializable) </li>
<li>in DTOs (it’s not serializable) </li>
<li>in input parameters of methods </li>
<li>in constructor parameters </li>
</ul>
</li>
<li><p>何时使用Optional</p>
<p> <strong>当函数的返回值有可能是 null 时，我们应该尽可能地去使用它.</strong></p>
</li>
</ul>
<h4 id="流"><a href="#流" class="headerlink" title="流"></a>流</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package java.util.stream;</span><br><span class="line"></span><br><span class="line">import java.nio.charset.Charset;</span><br><span class="line">import java.nio.file.Files;</span><br><span class="line">import java.nio.file.Path;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Collection;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.Objects;</span><br><span class="line">import java.util.Optional;</span><br><span class="line">import java.util.Spliterator;</span><br><span class="line">import java.util.Spliterators;</span><br><span class="line">import java.util.concurrent.ConcurrentHashMap;</span><br><span class="line">import java.util.function.BiConsumer;</span><br><span class="line">import java.util.function.BiFunction;</span><br><span class="line">import java.util.function.BinaryOperator;</span><br><span class="line">import java.util.function.Consumer;</span><br><span class="line">import java.util.function.Function;</span><br><span class="line">import java.util.function.IntFunction;</span><br><span class="line">import java.util.function.Predicate;</span><br><span class="line">import java.util.function.Supplier;</span><br><span class="line">import java.util.function.ToDoubleFunction;</span><br><span class="line">import java.util.function.ToIntFunction;</span><br><span class="line">import java.util.function.ToLongFunction;</span><br><span class="line">import java.util.function.UnaryOperator;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * A sequence of elements supporting sequential and parallel aggregate</span><br><span class="line"> * operations.  The following example illustrates an aggregate operation using</span><br><span class="line"> * &#123;@link Stream&#125; and &#123;@link IntStream&#125;:</span><br><span class="line"> *</span><br><span class="line"> * &lt;pre&gt;&#123;@code</span><br><span class="line"> *     int sum = widgets.stream()</span><br><span class="line"> *                      .filter(w -&gt; w.getColor() == RED)</span><br><span class="line"> *                      .mapToInt(w -&gt; w.getWeight())</span><br><span class="line"> *                      .sum();</span><br><span class="line"> * &#125;&lt;/pre&gt;</span><br><span class="line"> *</span><br><span class="line"> * In this example, &#123;@code widgets&#125; is a &#123;@code Collection&lt;Widget&gt;&#125;.  We create</span><br><span class="line"> * a stream of &#123;@code Widget&#125; objects via &#123;@link Collection#stream Collection.stream()&#125;,</span><br><span class="line"> * filter it to produce a stream containing only the red widgets, and then</span><br><span class="line"> * transform it into a stream of &#123;@code int&#125; values representing the weight of</span><br><span class="line"> * each red widget. Then this stream is summed to produce a total weight.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;In addition to &#123;@code Stream&#125;, which is a stream of object references,</span><br><span class="line"> * there are primitive specializations for &#123;@link IntStream&#125;, &#123;@link LongStream&#125;,</span><br><span class="line"> * and &#123;@link DoubleStream&#125;, all of which are referred to as &quot;streams&quot; and</span><br><span class="line"> * conform to the characteristics and restrictions described here.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;To perform a computation, stream</span><br><span class="line"> * &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;operations&lt;/a&gt; are composed into a</span><br><span class="line"> * &lt;em&gt;stream pipeline&lt;/em&gt;.  A stream pipeline consists of a source (which</span><br><span class="line"> * might be an array, a collection, a generator function, an I/O channel,</span><br><span class="line"> * etc), zero or more &lt;em&gt;intermediate operations&lt;/em&gt; (which transform a</span><br><span class="line"> * stream into another stream, such as &#123;@link Stream#filter(Predicate)&#125;), and a</span><br><span class="line"> * &lt;em&gt;terminal operation&lt;/em&gt; (which produces a result or side-effect, such</span><br><span class="line"> * as &#123;@link Stream#count()&#125; or &#123;@link Stream#forEach(Consumer)&#125;).</span><br><span class="line"> * Streams are lazy; computation on the source data is only performed when the</span><br><span class="line"> * terminal operation is initiated, and source elements are consumed only</span><br><span class="line"> * as needed.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Collections and streams, while bearing some superficial similarities,</span><br><span class="line"> * have different goals.  Collections are primarily concerned with the efficient</span><br><span class="line"> * management of, and access to, their elements.  By contrast, streams do not</span><br><span class="line"> * provide a means to directly access or manipulate their elements, and are</span><br><span class="line"> * instead concerned with declaratively describing their source and the</span><br><span class="line"> * computational operations which will be performed in aggregate on that source.</span><br><span class="line"> * However, if the provided stream operations do not offer the desired</span><br><span class="line"> * functionality, the &#123;@link #iterator()&#125; and &#123;@link #spliterator()&#125; operations</span><br><span class="line"> * can be used to perform a controlled traversal.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;A stream pipeline, like the &quot;widgets&quot; example above, can be viewed as</span><br><span class="line"> * a &lt;em&gt;query&lt;/em&gt; on the stream source.  Unless the source was explicitly</span><br><span class="line"> * designed for concurrent modification (such as a &#123;@link ConcurrentHashMap&#125;),</span><br><span class="line"> * unpredictable or erroneous behavior may result from modifying the stream</span><br><span class="line"> * source while it is being queried.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Most stream operations accept parameters that describe user-specified</span><br><span class="line"> * behavior, such as the lambda expression &#123;@code w -&gt; w.getWeight()&#125; passed to</span><br><span class="line"> * &#123;@code mapToInt&#125; in the example above.  To preserve correct behavior,</span><br><span class="line"> * these &lt;em&gt;behavioral parameters&lt;/em&gt;:</span><br><span class="line"> * &lt;ul&gt;</span><br><span class="line"> * &lt;li&gt;must be &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;</span><br><span class="line"> * (they do not modify the stream source); and&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;in most cases must be &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line"> * (their result should not depend on any state that might change during execution</span><br><span class="line"> * of the stream pipeline).&lt;/li&gt;</span><br><span class="line"> * &lt;/ul&gt;</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Such parameters are always instances of a</span><br><span class="line"> * &lt;a href=&quot;../function/package-summary.html&quot;&gt;functional interface&lt;/a&gt; such</span><br><span class="line"> * as &#123;@link java.util.function.Function&#125;, and are often lambda expressions or</span><br><span class="line"> * method references.  Unless otherwise specified these parameters must be</span><br><span class="line"> * &lt;em&gt;non-null&lt;/em&gt;.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;A stream should be operated on (invoking an intermediate or terminal stream</span><br><span class="line"> * operation) only once.  This rules out, for example, &quot;forked&quot; streams, where</span><br><span class="line"> * the same source feeds two or more pipelines, or multiple traversals of the</span><br><span class="line"> * same stream.  A stream implementation may throw &#123;@link IllegalStateException&#125;</span><br><span class="line"> * if it detects that the stream is being reused. However, since some stream</span><br><span class="line"> * operations may return their receiver rather than a new stream object, it may</span><br><span class="line"> * not be possible to detect reuse in all cases.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Streams have a &#123;@link #close()&#125; method and implement &#123;@link AutoCloseable&#125;,</span><br><span class="line"> * but nearly all stream instances do not actually need to be closed after use.</span><br><span class="line"> * Generally, only streams whose source is an IO channel (such as those returned</span><br><span class="line"> * by &#123;@link Files#lines(Path, Charset)&#125;) will require closing.  Most streams</span><br><span class="line"> * are backed by collections, arrays, or generating functions, which require no</span><br><span class="line"> * special resource management.  (If a stream does require closing, it can be</span><br><span class="line"> * declared as a resource in a &#123;@code try&#125;-with-resources statement.)</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Stream pipelines may execute either sequentially or in</span><br><span class="line"> * &lt;a href=&quot;package-summary.html#Parallelism&quot;&gt;parallel&lt;/a&gt;.  This</span><br><span class="line"> * execution mode is a property of the stream.  Streams are created</span><br><span class="line"> * with an initial choice of sequential or parallel execution.  (For example,</span><br><span class="line"> * &#123;@link Collection#stream() Collection.stream()&#125; creates a sequential stream,</span><br><span class="line"> * and &#123;@link Collection#parallelStream() Collection.parallelStream()&#125; creates</span><br><span class="line"> * a parallel one.)  This choice of execution mode may be modified by the</span><br><span class="line"> * &#123;@link #sequential()&#125; or &#123;@link #parallel()&#125; methods, and may be queried with</span><br><span class="line"> * the &#123;@link #isParallel()&#125; method.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of the stream elements</span><br><span class="line"> * @since 1.8</span><br><span class="line"> * @see IntStream</span><br><span class="line"> * @see LongStream</span><br><span class="line"> * @see DoubleStream</span><br><span class="line"> * @see &lt;a href=&quot;package-summary.html&quot;&gt;java.util.stream&lt;/a&gt;</span><br><span class="line"> */</span><br><span class="line">public interface Stream&lt;T&gt; extends BaseStream&lt;T, Stream&lt;T&gt;&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the elements of this stream that match</span><br><span class="line">     * the given predicate.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param predicate a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                  &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                  predicate to apply to each element to determine if it</span><br><span class="line">     *                  should be included</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the results of applying the given</span><br><span class="line">     * function to the elements of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;R&gt; The element type of the new stream</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code IntStream&#125; consisting of the results of applying the</span><br><span class="line">     * given function to the elements of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;</span><br><span class="line">     *     intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    IntStream mapToInt(ToIntFunction&lt;? super T&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a &#123;@code LongStream&#125; consisting of the results of applying the</span><br><span class="line">     * given function to the elements of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    LongStream mapToLong(ToLongFunction&lt;? super T&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a &#123;@code DoubleStream&#125; consisting of the results of applying the</span><br><span class="line">     * given function to the elements of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    DoubleStream mapToDouble(ToDoubleFunction&lt;? super T&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the results of replacing each element of</span><br><span class="line">     * this stream with the contents of a mapped stream produced by applying</span><br><span class="line">     * the provided mapping function to each element.  Each mapped stream is</span><br><span class="line">     * &#123;@link java.util.stream.BaseStream#close() closed&#125; after its contents</span><br><span class="line">     * have been placed into this stream.  (If a mapped stream is &#123;@code null&#125;</span><br><span class="line">     * an empty stream is used, instead.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * The &#123;@code flatMap()&#125; operation has the effect of applying a one-to-many</span><br><span class="line">     * transformation to the elements of the stream, and then flattening the</span><br><span class="line">     * resulting elements into a new stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;&lt;b&gt;Examples.&lt;/b&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;If &#123;@code orders&#125; is a stream of purchase orders, and each purchase</span><br><span class="line">     * order contains a collection of line items, then the following produces a</span><br><span class="line">     * stream containing all the line items in all the orders:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     orders.flatMap(order -&gt; order.getLineItems().stream())...</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;If &#123;@code path&#125; is the path to a file, then the following produces a</span><br><span class="line">     * stream of the &#123;@code words&#125; contained in that file:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.UTF_8);</span><br><span class="line">     *     Stream&lt;String&gt; words = lines.flatMap(line -&gt; Stream.of(line.split(&quot; +&quot;)));</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     * The &#123;@code mapper&#125; function passed to &#123;@code flatMap&#125; splits a line,</span><br><span class="line">     * using a simple regular expression, into an array of words, and then</span><br><span class="line">     * creates a stream of words from that array.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;R&gt; The element type of the new stream</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element which produces a stream</span><br><span class="line">     *               of new values</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code IntStream&#125; consisting of the results of replacing each</span><br><span class="line">     * element of this stream with the contents of a mapped stream produced by</span><br><span class="line">     * applying the provided mapping function to each element.  Each mapped</span><br><span class="line">     * stream is &#123;@link java.util.stream.BaseStream#close() closed&#125; after its</span><br><span class="line">     * contents have been placed into this stream.  (If a mapped stream is</span><br><span class="line">     * &#123;@code null&#125; an empty stream is used, instead.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element which produces a stream</span><br><span class="line">     *               of new values</span><br><span class="line">     * @return the new stream</span><br><span class="line">     * @see #flatMap(Function)</span><br><span class="line">     */</span><br><span class="line">    IntStream flatMapToInt(Function&lt;? super T, ? extends IntStream&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code LongStream&#125; consisting of the results of replacing each</span><br><span class="line">     * element of this stream with the contents of a mapped stream produced by</span><br><span class="line">     * applying the provided mapping function to each element.  Each mapped</span><br><span class="line">     * stream is &#123;@link java.util.stream.BaseStream#close() closed&#125; after its</span><br><span class="line">     * contents have been placed into this stream.  (If a mapped stream is</span><br><span class="line">     * &#123;@code null&#125; an empty stream is used, instead.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element which produces a stream</span><br><span class="line">     *               of new values</span><br><span class="line">     * @return the new stream</span><br><span class="line">     * @see #flatMap(Function)</span><br><span class="line">     */</span><br><span class="line">    LongStream flatMapToLong(Function&lt;? super T, ? extends LongStream&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@code DoubleStream&#125; consisting of the results of replacing</span><br><span class="line">     * each element of this stream with the contents of a mapped stream produced</span><br><span class="line">     * by applying the provided mapping function to each element.  Each mapped</span><br><span class="line">     * stream is &#123;@link java.util.stream.BaseStream#close() closed&#125; after its</span><br><span class="line">     * contents have placed been into this stream.  (If a mapped stream is</span><br><span class="line">     * &#123;@code null&#125; an empty stream is used, instead.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param mapper a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *               &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *               function to apply to each element which produces a stream</span><br><span class="line">     *               of new values</span><br><span class="line">     * @return the new stream</span><br><span class="line">     * @see #flatMap(Function)</span><br><span class="line">     */</span><br><span class="line">    DoubleStream flatMapToDouble(Function&lt;? super T, ? extends DoubleStream&gt; mapper);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the distinct elements (according to</span><br><span class="line">     * &#123;@link Object#equals(Object)&#125;) of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;For ordered streams, the selection of distinct elements is stable</span><br><span class="line">     * (for duplicated elements, the element appearing first in the encounter</span><br><span class="line">     * order is preserved.)  For unordered streams, no stability guarantees</span><br><span class="line">     * are made.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;stateful</span><br><span class="line">     * intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * Preserving stability for &#123;@code distinct()&#125; in parallel pipelines is</span><br><span class="line">     * relatively expensive (requires that the operation act as a full barrier,</span><br><span class="line">     * with substantial buffering overhead), and stability is often not needed.</span><br><span class="line">     * Using an unordered stream source (such as &#123;@link #generate(Supplier)&#125;)</span><br><span class="line">     * or removing the ordering constraint with &#123;@link #unordered()&#125; may result</span><br><span class="line">     * in significantly more efficient execution for &#123;@code distinct()&#125; in parallel</span><br><span class="line">     * pipelines, if the semantics of your situation permit.  If consistency</span><br><span class="line">     * with encounter order is required, and you are experiencing poor performance</span><br><span class="line">     * or memory utilization with &#123;@code distinct()&#125; in parallel pipelines,</span><br><span class="line">     * switching to sequential execution with &#123;@link #sequential()&#125; may improve</span><br><span class="line">     * performance.</span><br><span class="line">     *</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; distinct();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the elements of this stream, sorted</span><br><span class="line">     * according to natural order.  If the elements of this stream are not</span><br><span class="line">     * &#123;@code Comparable&#125;, a &#123;@code java.lang.ClassCastException&#125; may be thrown</span><br><span class="line">     * when the terminal operation is executed.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;For ordered streams, the sort is stable.  For unordered streams, no</span><br><span class="line">     * stability guarantees are made.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;stateful</span><br><span class="line">     * intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; sorted();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the elements of this stream, sorted</span><br><span class="line">     * according to the provided &#123;@code Comparator&#125;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;For ordered streams, the sort is stable.  For unordered streams, no</span><br><span class="line">     * stability guarantees are made.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;stateful</span><br><span class="line">     * intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param comparator a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                   &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                   &#123;@code Comparator&#125; to be used to compare stream elements</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; sorted(Comparator&lt;? super T&gt; comparator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the elements of this stream, additionally</span><br><span class="line">     * performing the provided action on each element as elements are consumed</span><br><span class="line">     * from the resulting stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is an &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;intermediate</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;For parallel stream pipelines, the action may be called at</span><br><span class="line">     * whatever time and in whatever thread the element is made available by the</span><br><span class="line">     * upstream operation.  If the action modifies shared state,</span><br><span class="line">     * it is responsible for providing the required synchronization.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote This method exists mainly to support debugging, where you want</span><br><span class="line">     * to see the elements as they flow past a certain point in a pipeline:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;)</span><br><span class="line">     *         .filter(e -&gt; e.length() &gt; 3)</span><br><span class="line">     *         .peek(e -&gt; System.out.println(&quot;Filtered value: &quot; + e))</span><br><span class="line">     *         .map(String::toUpperCase)</span><br><span class="line">     *         .peek(e -&gt; System.out.println(&quot;Mapped value: &quot; + e))</span><br><span class="line">     *         .collect(Collectors.toList());</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param action a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;</span><br><span class="line">     *                 non-interfering&lt;/a&gt; action to perform on the elements as</span><br><span class="line">     *                 they are consumed from the stream</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; peek(Consumer&lt;? super T&gt; action);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the elements of this stream, truncated</span><br><span class="line">     * to be no longer than &#123;@code maxSize&#125; in length.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * stateful intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * While &#123;@code limit()&#125; is generally a cheap operation on sequential</span><br><span class="line">     * stream pipelines, it can be quite expensive on ordered parallel pipelines,</span><br><span class="line">     * especially for large values of &#123;@code maxSize&#125;, since &#123;@code limit(n)&#125;</span><br><span class="line">     * is constrained to return not just any &lt;em&gt;n&lt;/em&gt; elements, but the</span><br><span class="line">     * &lt;em&gt;first n&lt;/em&gt; elements in the encounter order.  Using an unordered</span><br><span class="line">     * stream source (such as &#123;@link #generate(Supplier)&#125;) or removing the</span><br><span class="line">     * ordering constraint with &#123;@link #unordered()&#125; may result in significant</span><br><span class="line">     * speedups of &#123;@code limit()&#125; in parallel pipelines, if the semantics of</span><br><span class="line">     * your situation permit.  If consistency with encounter order is required,</span><br><span class="line">     * and you are experiencing poor performance or memory utilization with</span><br><span class="line">     * &#123;@code limit()&#125; in parallel pipelines, switching to sequential execution</span><br><span class="line">     * with &#123;@link #sequential()&#125; may improve performance.</span><br><span class="line">     *</span><br><span class="line">     * @param maxSize the number of elements the stream should be limited to</span><br><span class="line">     * @return the new stream</span><br><span class="line">     * @throws IllegalArgumentException if &#123;@code maxSize&#125; is negative</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; limit(long maxSize);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a stream consisting of the remaining elements of this stream</span><br><span class="line">     * after discarding the first &#123;@code n&#125; elements of the stream.</span><br><span class="line">     * If this stream contains fewer than &#123;@code n&#125; elements then an</span><br><span class="line">     * empty stream will be returned.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;stateful</span><br><span class="line">     * intermediate operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * While &#123;@code skip()&#125; is generally a cheap operation on sequential</span><br><span class="line">     * stream pipelines, it can be quite expensive on ordered parallel pipelines,</span><br><span class="line">     * especially for large values of &#123;@code n&#125;, since &#123;@code skip(n)&#125;</span><br><span class="line">     * is constrained to skip not just any &lt;em&gt;n&lt;/em&gt; elements, but the</span><br><span class="line">     * &lt;em&gt;first n&lt;/em&gt; elements in the encounter order.  Using an unordered</span><br><span class="line">     * stream source (such as &#123;@link #generate(Supplier)&#125;) or removing the</span><br><span class="line">     * ordering constraint with &#123;@link #unordered()&#125; may result in significant</span><br><span class="line">     * speedups of &#123;@code skip()&#125; in parallel pipelines, if the semantics of</span><br><span class="line">     * your situation permit.  If consistency with encounter order is required,</span><br><span class="line">     * and you are experiencing poor performance or memory utilization with</span><br><span class="line">     * &#123;@code skip()&#125; in parallel pipelines, switching to sequential execution</span><br><span class="line">     * with &#123;@link #sequential()&#125; may improve performance.</span><br><span class="line">     *</span><br><span class="line">     * @param n the number of leading elements to skip</span><br><span class="line">     * @return the new stream</span><br><span class="line">     * @throws IllegalArgumentException if &#123;@code n&#125; is negative</span><br><span class="line">     */</span><br><span class="line">    Stream&lt;T&gt; skip(long n);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs an action for each element of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The behavior of this operation is explicitly nondeterministic.</span><br><span class="line">     * For parallel stream pipelines, this operation does &lt;em&gt;not&lt;/em&gt;</span><br><span class="line">     * guarantee to respect the encounter order of the stream, as doing so</span><br><span class="line">     * would sacrifice the benefit of parallelism.  For any given element, the</span><br><span class="line">     * action may be performed at whatever time and in whatever thread the</span><br><span class="line">     * library chooses.  If the action accesses shared state, it is</span><br><span class="line">     * responsible for providing the required synchronization.</span><br><span class="line">     *</span><br><span class="line">     * @param action a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;</span><br><span class="line">     *               non-interfering&lt;/a&gt; action to perform on the elements</span><br><span class="line">     */</span><br><span class="line">    void forEach(Consumer&lt;? super T&gt; action);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs an action for each element of this stream, in the encounter</span><br><span class="line">     * order of the stream if the stream has a defined encounter order.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This operation processes the elements one at a time, in encounter</span><br><span class="line">     * order if one exists.  Performing the action for one element</span><br><span class="line">     * &lt;a href=&quot;../concurrent/package-summary.html#MemoryVisibility&quot;&gt;&lt;i&gt;happens-before&lt;/i&gt;&lt;/a&gt;</span><br><span class="line">     * performing the action for subsequent elements, but for any given element,</span><br><span class="line">     * the action may be performed in whatever thread the library chooses.</span><br><span class="line">     *</span><br><span class="line">     * @param action a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;</span><br><span class="line">     *               non-interfering&lt;/a&gt; action to perform on the elements</span><br><span class="line">     * @see #forEach(Consumer)</span><br><span class="line">     */</span><br><span class="line">    void forEachOrdered(Consumer&lt;? super T&gt; action);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an array containing the elements of this stream.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @return an array containing the elements of this stream</span><br><span class="line">     */</span><br><span class="line">    Object[] toArray();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an array containing the elements of this stream, using the</span><br><span class="line">     * provided &#123;@code generator&#125; function to allocate the returned array, as</span><br><span class="line">     * well as any additional arrays that might be required for a partitioned</span><br><span class="line">     * execution or for resizing.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * The generator function takes an integer, which is the size of the</span><br><span class="line">     * desired array, and produces an array of the desired size.  This can be</span><br><span class="line">     * concisely expressed with an array constructor reference:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Person[] men = people.stream()</span><br><span class="line">     *                          .filter(p -&gt; p.getGender() == MALE)</span><br><span class="line">     *                          .toArray(Person[]::new);</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;A&gt; the element type of the resulting array</span><br><span class="line">     * @param generator a function which produces a new array of the desired</span><br><span class="line">     *                  type and the provided length</span><br><span class="line">     * @return an array containing the elements in this stream</span><br><span class="line">     * @throws ArrayStoreException if the runtime type of the array returned</span><br><span class="line">     * from the array generator is not a supertype of the runtime type of every</span><br><span class="line">     * element in this stream</span><br><span class="line">     */</span><br><span class="line">    &lt;A&gt; A[] toArray(IntFunction&lt;A[]&gt; generator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs a &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt; on the</span><br><span class="line">     * elements of this stream, using the provided identity value and an</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;</span><br><span class="line">     * accumulation function, and returns the reduced value.  This is equivalent</span><br><span class="line">     * to:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     T result = identity;</span><br><span class="line">     *     for (T element : this stream)</span><br><span class="line">     *         result = accumulator.apply(result, element)</span><br><span class="line">     *     return result;</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * but is not constrained to execute sequentially.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The &#123;@code identity&#125; value must be an identity for the accumulator</span><br><span class="line">     * function. This means that for all &#123;@code t&#125;,</span><br><span class="line">     * &#123;@code accumulator.apply(identity, t)&#125; is equal to &#123;@code t&#125;.</span><br><span class="line">     * The &#123;@code accumulator&#125; function must be an</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt; function.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote Sum, min, max, average, and string concatenation are all special</span><br><span class="line">     * cases of reduction. Summing a stream of numbers can be expressed as:</span><br><span class="line">     *</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Integer sum = integers.reduce(0, (a, b) -&gt; a+b);</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * or:</span><br><span class="line">     *</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Integer sum = integers.reduce(0, Integer::sum);</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;While this may seem a more roundabout way to perform an aggregation</span><br><span class="line">     * compared to simply mutating a running total in a loop, reduction</span><br><span class="line">     * operations parallelize more gracefully, without needing additional</span><br><span class="line">     * synchronization and with greatly reduced risk of data races.</span><br><span class="line">     *</span><br><span class="line">     * @param identity the identity value for the accumulating function</span><br><span class="line">     * @param accumulator an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for combining two values</span><br><span class="line">     * @return the result of the reduction</span><br><span class="line">     */</span><br><span class="line">    T reduce(T identity, BinaryOperator&lt;T&gt; accumulator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs a &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt; on the</span><br><span class="line">     * elements of this stream, using an</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt; accumulation</span><br><span class="line">     * function, and returns an &#123;@code Optional&#125; describing the reduced value,</span><br><span class="line">     * if any. This is equivalent to:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     boolean foundAny = false;</span><br><span class="line">     *     T result = null;</span><br><span class="line">     *     for (T element : this stream) &#123;</span><br><span class="line">     *         if (!foundAny) &#123;</span><br><span class="line">     *             foundAny = true;</span><br><span class="line">     *             result = element;</span><br><span class="line">     *         &#125;</span><br><span class="line">     *         else</span><br><span class="line">     *             result = accumulator.apply(result, element);</span><br><span class="line">     *     &#125;</span><br><span class="line">     *     return foundAny ? Optional.of(result) : Optional.empty();</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * but is not constrained to execute sequentially.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The &#123;@code accumulator&#125; function must be an</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt; function.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param accumulator an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for combining two values</span><br><span class="line">     * @return an &#123;@link Optional&#125; describing the result of the reduction</span><br><span class="line">     * @throws NullPointerException if the result of the reduction is null</span><br><span class="line">     * @see #reduce(Object, BinaryOperator)</span><br><span class="line">     * @see #min(Comparator)</span><br><span class="line">     * @see #max(Comparator)</span><br><span class="line">     */</span><br><span class="line">    Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs a &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt; on the</span><br><span class="line">     * elements of this stream, using the provided identity, accumulation and</span><br><span class="line">     * combining functions.  This is equivalent to:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     U result = identity;</span><br><span class="line">     *     for (T element : this stream)</span><br><span class="line">     *         result = accumulator.apply(result, element)</span><br><span class="line">     *     return result;</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * but is not constrained to execute sequentially.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The &#123;@code identity&#125; value must be an identity for the combiner</span><br><span class="line">     * function.  This means that for all &#123;@code u&#125;, &#123;@code combiner(identity, u)&#125;</span><br><span class="line">     * is equal to &#123;@code u&#125;.  Additionally, the &#123;@code combiner&#125; function</span><br><span class="line">     * must be compatible with the &#123;@code accumulator&#125; function; for all</span><br><span class="line">     * &#123;@code u&#125; and &#123;@code t&#125;, the following must hold:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     combiner.apply(u, accumulator.apply(identity, t)) == accumulator.apply(u, t)</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote Many reductions using this form can be represented more simply</span><br><span class="line">     * by an explicit combination of &#123;@code map&#125; and &#123;@code reduce&#125; operations.</span><br><span class="line">     * The &#123;@code accumulator&#125; function acts as a fused mapper and accumulator,</span><br><span class="line">     * which can sometimes be more efficient than separate mapping and reduction,</span><br><span class="line">     * such as when knowing the previously reduced value allows you to avoid</span><br><span class="line">     * some computation.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;U&gt; The type of the result</span><br><span class="line">     * @param identity the identity value for the combiner function</span><br><span class="line">     * @param accumulator an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for incorporating an additional element into a result</span><br><span class="line">     * @param combiner an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for combining two values, which must be</span><br><span class="line">     *                    compatible with the accumulator function</span><br><span class="line">     * @return the result of the reduction</span><br><span class="line">     * @see #reduce(BinaryOperator)</span><br><span class="line">     * @see #reduce(Object, BinaryOperator)</span><br><span class="line">     */</span><br><span class="line">    &lt;U&gt; U reduce(U identity,</span><br><span class="line">                 BiFunction&lt;U, ? super T, U&gt; accumulator,</span><br><span class="line">                 BinaryOperator&lt;U&gt; combiner);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs a &lt;a href=&quot;package-summary.html#MutableReduction&quot;&gt;mutable</span><br><span class="line">     * reduction&lt;/a&gt; operation on the elements of this stream.  A mutable</span><br><span class="line">     * reduction is one in which the reduced value is a mutable result container,</span><br><span class="line">     * such as an &#123;@code ArrayList&#125;, and elements are incorporated by updating</span><br><span class="line">     * the state of the result rather than by replacing the result.  This</span><br><span class="line">     * produces a result equivalent to:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     R result = supplier.get();</span><br><span class="line">     *     for (T element : this stream)</span><br><span class="line">     *         accumulator.accept(result, element);</span><br><span class="line">     *     return result;</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;Like &#123;@link #reduce(Object, BinaryOperator)&#125;, &#123;@code collect&#125; operations</span><br><span class="line">     * can be parallelized without requiring additional synchronization.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote There are many existing classes in the JDK whose signatures are</span><br><span class="line">     * well-suited for use with method references as arguments to &#123;@code collect()&#125;.</span><br><span class="line">     * For example, the following will accumulate strings into an &#123;@code ArrayList&#125;:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     List&lt;String&gt; asList = stringStream.collect(ArrayList::new, ArrayList::add,</span><br><span class="line">     *                                                ArrayList::addAll);</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The following will take a stream of strings and concatenates them into a</span><br><span class="line">     * single string:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     String concat = stringStream.collect(StringBuilder::new, StringBuilder::append,</span><br><span class="line">     *                                          StringBuilder::append)</span><br><span class="line">     *                                 .toString();</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;R&gt; type of the result</span><br><span class="line">     * @param supplier a function that creates a new result container. For a</span><br><span class="line">     *                 parallel execution, this function may be called</span><br><span class="line">     *                 multiple times and must return a fresh value each time.</span><br><span class="line">     * @param accumulator an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for incorporating an additional element into a result</span><br><span class="line">     * @param combiner an &lt;a href=&quot;package-summary.html#Associativity&quot;&gt;associative&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                    &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                    function for combining two values, which must be</span><br><span class="line">     *                    compatible with the accumulator function</span><br><span class="line">     * @return the result of the reduction</span><br><span class="line">     */</span><br><span class="line">    &lt;R&gt; R collect(Supplier&lt;R&gt; supplier,</span><br><span class="line">                  BiConsumer&lt;R, ? super T&gt; accumulator,</span><br><span class="line">                  BiConsumer&lt;R, R&gt; combiner);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Performs a &lt;a href=&quot;package-summary.html#MutableReduction&quot;&gt;mutable</span><br><span class="line">     * reduction&lt;/a&gt; operation on the elements of this stream using a</span><br><span class="line">     * &#123;@code Collector&#125;.  A &#123;@code Collector&#125;</span><br><span class="line">     * encapsulates the functions used as arguments to</span><br><span class="line">     * &#123;@link #collect(Supplier, BiConsumer, BiConsumer)&#125;, allowing for reuse of</span><br><span class="line">     * collection strategies and composition of collect operations such as</span><br><span class="line">     * multiple-level grouping or partitioning.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;If the stream is parallel, and the &#123;@code Collector&#125;</span><br><span class="line">     * is &#123;@link Collector.Characteristics#CONCURRENT concurrent&#125;, and</span><br><span class="line">     * either the stream is unordered or the collector is</span><br><span class="line">     * &#123;@link Collector.Characteristics#UNORDERED unordered&#125;,</span><br><span class="line">     * then a concurrent reduction will be performed (see &#123;@link Collector&#125; for</span><br><span class="line">     * details on concurrent reduction.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;When executed in parallel, multiple intermediate results may be</span><br><span class="line">     * instantiated, populated, and merged so as to maintain isolation of</span><br><span class="line">     * mutable data structures.  Therefore, even when executed in parallel</span><br><span class="line">     * with non-thread-safe data structures (such as &#123;@code ArrayList&#125;), no</span><br><span class="line">     * additional synchronization is needed for a parallel reduction.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * The following will accumulate strings into an ArrayList:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     List&lt;String&gt; asList = stringStream.collect(Collectors.toList());</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The following will classify &#123;@code Person&#125; objects by city:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Map&lt;String, List&lt;Person&gt;&gt; peopleByCity</span><br><span class="line">     *         = personStream.collect(Collectors.groupingBy(Person::getCity));</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The following will classify &#123;@code Person&#125; objects by state and city,</span><br><span class="line">     * cascading two &#123;@code Collector&#125;s together:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; peopleByStateAndCity</span><br><span class="line">     *         = personStream.collect(Collectors.groupingBy(Person::getState,</span><br><span class="line">     *                                                      Collectors.groupingBy(Person::getCity)));</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;R&gt; the type of the result</span><br><span class="line">     * @param &lt;A&gt; the intermediate accumulation type of the &#123;@code Collector&#125;</span><br><span class="line">     * @param collector the &#123;@code Collector&#125; describing the reduction</span><br><span class="line">     * @return the result of the reduction</span><br><span class="line">     * @see #collect(Supplier, BiConsumer, BiConsumer)</span><br><span class="line">     * @see Collectors</span><br><span class="line">     */</span><br><span class="line">    &lt;R, A&gt; R collect(Collector&lt;? super T, A, R&gt; collector);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the minimum element of this stream according to the provided</span><br><span class="line">     * &#123;@code Comparator&#125;.  This is a special case of a</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param comparator a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                   &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                   &#123;@code Comparator&#125; to compare elements of this stream</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing the minimum element of this stream,</span><br><span class="line">     * or an empty &#123;@code Optional&#125; if the stream is empty</span><br><span class="line">     * @throws NullPointerException if the minimum element is null</span><br><span class="line">     */</span><br><span class="line">    Optional&lt;T&gt; min(Comparator&lt;? super T&gt; comparator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the maximum element of this stream according to the provided</span><br><span class="line">     * &#123;@code Comparator&#125;.  This is a special case of a</span><br><span class="line">     * &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal</span><br><span class="line">     * operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @param comparator a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                   &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                   &#123;@code Comparator&#125; to compare elements of this stream</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing the maximum element of this stream,</span><br><span class="line">     * or an empty &#123;@code Optional&#125; if the stream is empty</span><br><span class="line">     * @throws NullPointerException if the maximum element is null</span><br><span class="line">     */</span><br><span class="line">    Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the count of elements in this stream.  This is a special case of</span><br><span class="line">     * a &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;reduction&lt;/a&gt; and is</span><br><span class="line">     * equivalent to:</span><br><span class="line">     * &lt;pre&gt;&#123;@code</span><br><span class="line">     *     return mapToLong(e -&gt; 1L).sum();</span><br><span class="line">     * &#125;&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @return the count of elements in this stream</span><br><span class="line">     */</span><br><span class="line">    long count();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns whether any elements of this stream match the provided</span><br><span class="line">     * predicate.  May not evaluate the predicate on all elements if not</span><br><span class="line">     * necessary for determining the result.  If the stream is empty then</span><br><span class="line">     * &#123;@code false&#125; is returned and the predicate is not evaluated.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * This method evaluates the &lt;em&gt;existential quantification&lt;/em&gt; of the</span><br><span class="line">     * predicate over the elements of the stream (for some x P(x)).</span><br><span class="line">     *</span><br><span class="line">     * @param predicate a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                  &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                  predicate to apply to elements of this stream</span><br><span class="line">     * @return &#123;@code true&#125; if any elements of the stream match the provided</span><br><span class="line">     * predicate, otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    boolean anyMatch(Predicate&lt;? super T&gt; predicate);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns whether all elements of this stream match the provided predicate.</span><br><span class="line">     * May not evaluate the predicate on all elements if not necessary for</span><br><span class="line">     * determining the result.  If the stream is empty then &#123;@code true&#125; is</span><br><span class="line">     * returned and the predicate is not evaluated.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * This method evaluates the &lt;em&gt;universal quantification&lt;/em&gt; of the</span><br><span class="line">     * predicate over the elements of the stream (for all x P(x)).  If the</span><br><span class="line">     * stream is empty, the quantification is said to be &lt;em&gt;vacuously</span><br><span class="line">     * satisfied&lt;/em&gt; and is always &#123;@code true&#125; (regardless of P(x)).</span><br><span class="line">     *</span><br><span class="line">     * @param predicate a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                  &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                  predicate to apply to elements of this stream</span><br><span class="line">     * @return &#123;@code true&#125; if either all elements of the stream match the</span><br><span class="line">     * provided predicate or the stream is empty, otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    boolean allMatch(Predicate&lt;? super T&gt; predicate);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns whether no elements of this stream match the provided predicate.</span><br><span class="line">     * May not evaluate the predicate on all elements if not necessary for</span><br><span class="line">     * determining the result.  If the stream is empty then &#123;@code true&#125; is</span><br><span class="line">     * returned and the predicate is not evaluated.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote</span><br><span class="line">     * This method evaluates the &lt;em&gt;universal quantification&lt;/em&gt; of the</span><br><span class="line">     * negated predicate over the elements of the stream (for all x ~P(x)).  If</span><br><span class="line">     * the stream is empty, the quantification is said to be vacuously satisfied</span><br><span class="line">     * and is always &#123;@code true&#125;, regardless of P(x).</span><br><span class="line">     *</span><br><span class="line">     * @param predicate a &lt;a href=&quot;package-summary.html#NonInterference&quot;&gt;non-interfering&lt;/a&gt;,</span><br><span class="line">     *                  &lt;a href=&quot;package-summary.html#Statelessness&quot;&gt;stateless&lt;/a&gt;</span><br><span class="line">     *                  predicate to apply to elements of this stream</span><br><span class="line">     * @return &#123;@code true&#125; if either no elements of the stream match the</span><br><span class="line">     * provided predicate or the stream is empty, otherwise &#123;@code false&#125;</span><br><span class="line">     */</span><br><span class="line">    boolean noneMatch(Predicate&lt;? super T&gt; predicate);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@link Optional&#125; describing the first element of this stream,</span><br><span class="line">     * or an empty &#123;@code Optional&#125; if the stream is empty.  If the stream has</span><br><span class="line">     * no encounter order, then any element may be returned.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing the first element of this stream,</span><br><span class="line">     * or an empty &#123;@code Optional&#125; if the stream is empty</span><br><span class="line">     * @throws NullPointerException if the element selected is null</span><br><span class="line">     */</span><br><span class="line">    Optional&lt;T&gt; findFirst();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an &#123;@link Optional&#125; describing some element of the stream, or an</span><br><span class="line">     * empty &#123;@code Optional&#125; if the stream is empty.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;short-circuiting</span><br><span class="line">     * terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The behavior of this operation is explicitly nondeterministic; it is</span><br><span class="line">     * free to select any element in the stream.  This is to allow for maximal</span><br><span class="line">     * performance in parallel operations; the cost is that multiple invocations</span><br><span class="line">     * on the same source may not return the same result.  (If a stable result</span><br><span class="line">     * is desired, use &#123;@link #findFirst()&#125; instead.)</span><br><span class="line">     *</span><br><span class="line">     * @return an &#123;@code Optional&#125; describing some element of this stream, or an</span><br><span class="line">     * empty &#123;@code Optional&#125; if the stream is empty</span><br><span class="line">     * @throws NullPointerException if the element selected is null</span><br><span class="line">     * @see #findFirst()</span><br><span class="line">     */</span><br><span class="line">    Optional&lt;T&gt; findAny();</span><br><span class="line"></span><br><span class="line">    // Static factories</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a builder for a &#123;@code Stream&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; type of elements</span><br><span class="line">     * @return a stream builder</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Builder&lt;T&gt; builder() &#123;</span><br><span class="line">        return new Streams.StreamBuilderImpl&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an empty sequential &#123;@code Stream&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @return an empty sequential stream</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Stream&lt;T&gt; empty() &#123;</span><br><span class="line">        return StreamSupport.stream(Spliterators.&lt;T&gt;emptySpliterator(), false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a sequential &#123;@code Stream&#125; containing a single element.</span><br><span class="line">     *</span><br><span class="line">     * @param t the single element</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @return a singleton sequential stream</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Stream&lt;T&gt; of(T t) &#123;</span><br><span class="line">        return StreamSupport.stream(new Streams.StreamBuilderImpl&lt;&gt;(t), false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a sequential ordered stream whose elements are the specified values.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @param values the elements of the new stream</span><br><span class="line">     * @return the new stream</span><br><span class="line">     */</span><br><span class="line">    @SafeVarargs</span><br><span class="line">    @SuppressWarnings(&quot;varargs&quot;) // Creating a stream from an array is safe</span><br><span class="line">    public static&lt;T&gt; Stream&lt;T&gt; of(T... values) &#123;</span><br><span class="line">        return Arrays.stream(values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an infinite sequential ordered &#123;@code Stream&#125; produced by iterative</span><br><span class="line">     * application of a function &#123;@code f&#125; to an initial element &#123;@code seed&#125;,</span><br><span class="line">     * producing a &#123;@code Stream&#125; consisting of &#123;@code seed&#125;, &#123;@code f(seed)&#125;,</span><br><span class="line">     * &#123;@code f(f(seed))&#125;, etc.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The first element (position &#123;@code 0&#125;) in the &#123;@code Stream&#125; will be</span><br><span class="line">     * the provided &#123;@code seed&#125;.  For &#123;@code n &gt; 0&#125;, the element at position</span><br><span class="line">     * &#123;@code n&#125;, will be the result of applying the function &#123;@code f&#125; to the</span><br><span class="line">     * element at position &#123;@code n - 1&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @param seed the initial element</span><br><span class="line">     * @param f a function to be applied to to the previous element to produce</span><br><span class="line">     *          a new element</span><br><span class="line">     * @return a new sequential &#123;@code Stream&#125;</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f) &#123;</span><br><span class="line">        Objects.requireNonNull(f);</span><br><span class="line">        final Iterator&lt;T&gt; iterator = new Iterator&lt;T&gt;() &#123;</span><br><span class="line">            @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">            T t = (T) Streams.NONE;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public boolean hasNext() &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public T next() &#123;</span><br><span class="line">                return t = (t == Streams.NONE) ? seed : f.apply(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        return StreamSupport.stream(Spliterators.spliteratorUnknownSize(</span><br><span class="line">                iterator,</span><br><span class="line">                Spliterator.ORDERED | Spliterator.IMMUTABLE), false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns an infinite sequential unordered stream where each element is</span><br><span class="line">     * generated by the provided &#123;@code Supplier&#125;.  This is suitable for</span><br><span class="line">     * generating constant streams, streams of random elements, etc.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @param s the &#123;@code Supplier&#125; of generated elements</span><br><span class="line">     * @return a new infinite sequential unordered &#123;@code Stream&#125;</span><br><span class="line">     */</span><br><span class="line">    public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s) &#123;</span><br><span class="line">        Objects.requireNonNull(s);</span><br><span class="line">        return StreamSupport.stream(</span><br><span class="line">                new StreamSpliterators.InfiniteSupplyingSpliterator.OfRef&lt;&gt;(Long.MAX_VALUE, s), false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Creates a lazily concatenated stream whose elements are all the</span><br><span class="line">     * elements of the first stream followed by all the elements of the</span><br><span class="line">     * second stream.  The resulting stream is ordered if both</span><br><span class="line">     * of the input streams are ordered, and parallel if either of the input</span><br><span class="line">     * streams is parallel.  When the resulting stream is closed, the close</span><br><span class="line">     * handlers for both input streams are invoked.</span><br><span class="line">     *</span><br><span class="line">     * @implNote</span><br><span class="line">     * Use caution when constructing streams from repeated concatenation.</span><br><span class="line">     * Accessing an element of a deeply concatenated stream can result in deep</span><br><span class="line">     * call chains, or even &#123;@code StackOverflowException&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; The type of stream elements</span><br><span class="line">     * @param a the first stream</span><br><span class="line">     * @param b the second stream</span><br><span class="line">     * @return the concatenation of the two input streams</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; a, Stream&lt;? extends T&gt; b) &#123;</span><br><span class="line">        Objects.requireNonNull(a);</span><br><span class="line">        Objects.requireNonNull(b);</span><br><span class="line"></span><br><span class="line">        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">        Spliterator&lt;T&gt; split = new Streams.ConcatSpliterator.OfRef&lt;&gt;(</span><br><span class="line">                (Spliterator&lt;T&gt;) a.spliterator(), (Spliterator&lt;T&gt;) b.spliterator());</span><br><span class="line">        Stream&lt;T&gt; stream = StreamSupport.stream(split, a.isParallel() || b.isParallel());</span><br><span class="line">        return stream.onClose(Streams.composedClose(a, b));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * A mutable builder for a &#123;@code Stream&#125;.  This allows the creation of a</span><br><span class="line">     * &#123;@code Stream&#125; by generating elements individually and adding them to the</span><br><span class="line">     * &#123;@code Builder&#125; (without the copying overhead that comes from using</span><br><span class="line">     * an &#123;@code ArrayList&#125; as a temporary buffer.)</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;A stream builder has a lifecycle, which starts in a building</span><br><span class="line">     * phase, during which elements can be added, and then transitions to a built</span><br><span class="line">     * phase, after which elements may not be added.  The built phase begins</span><br><span class="line">     * when the &#123;@link #build()&#125; method is called, which creates an ordered</span><br><span class="line">     * &#123;@code Stream&#125; whose elements are the elements that were added to the stream</span><br><span class="line">     * builder, in the order they were added.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of stream elements</span><br><span class="line">     * @see Stream#builder()</span><br><span class="line">     * @since 1.8</span><br><span class="line">     */</span><br><span class="line">    public interface Builder&lt;T&gt; extends Consumer&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Adds an element to the stream being built.</span><br><span class="line">         *</span><br><span class="line">         * @throws IllegalStateException if the builder has already transitioned to</span><br><span class="line">         * the built state</span><br><span class="line">         */</span><br><span class="line">        @Override</span><br><span class="line">        void accept(T t);</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Adds an element to the stream being built.</span><br><span class="line">         *</span><br><span class="line">         * @implSpec</span><br><span class="line">         * The default implementation behaves as if:</span><br><span class="line">         * &lt;pre&gt;&#123;@code</span><br><span class="line">         *     accept(t)</span><br><span class="line">         *     return this;</span><br><span class="line">         * &#125;&lt;/pre&gt;</span><br><span class="line">         *</span><br><span class="line">         * @param t the element to add</span><br><span class="line">         * @return &#123;@code this&#125; builder</span><br><span class="line">         * @throws IllegalStateException if the builder has already transitioned to</span><br><span class="line">         * the built state</span><br><span class="line">         */</span><br><span class="line">        default Builder&lt;T&gt; add(T t) &#123;</span><br><span class="line">            accept(t);</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Builds the stream, transitioning this builder to the built state.</span><br><span class="line">         * An &#123;@code IllegalStateException&#125; is thrown if there are further attempts</span><br><span class="line">         * to operate on the builder after it has entered the built state.</span><br><span class="line">         *</span><br><span class="line">         * @return the built stream</span><br><span class="line">         * @throws IllegalStateException if the builder has already transitioned to</span><br><span class="line">         * the built state</span><br><span class="line">         */</span><br><span class="line">        Stream&lt;T&gt; build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>特点</p>
<ul>
<li>元素序列。可以访问特定元素类型的一组有序值，</li>
<li>源，使用一个提供数据的源，如集合，数组或者输入/输出资源，从有序集合生成流时会保留原有的顺序</li>
<li>数据处理操作，支持类似数据库的操作，及函数式编程中的常用操作，如filter，map,reduce.sort，find,match</li>
<li><strong>流水线</strong> 流操作大多数本身会返回一个流，这样多个操作可以链接起来，那么可以看作类似操作数据库的流水线操作</li>
<li><strong>内部迭代</strong> 流的迭代操作，是在内部进行迭代的。</li>
</ul>
</li>
<li><p>流与集合的区别：</p>
<p>在于什么时候计算</p>
<ul>
<li>集合是一个内存中的数据结构，它包含数据结构中目前的所有的值，集合中的每个元素都得先算出来才能添加到集合，集合是我需要就创建，无需考虑需求。</li>
<li>流是在概念上亭的数据结构，你不能添加或者删除元素，元素是按需求进行计算的，input-&gt;output,典型的生产者-消费者关系</li>
<li>流只能遍历一次,只能消费一次，而集合会一直存在内存中。</li>
<li>外部迭代与内部迭代，集合使用foreach进行外部迭代，流使用内部迭代，</li>
</ul>
</li>
<li><p><strong>流操作</strong></p>
<ul>
<li><p>中间操作  返回一个流对象的操作都是中间操作：如filter,map，limit, sort .etc</p>
<ul>
<li>filter()  接受一个断言条件去过滤流的所有元素。 这个流的操作是中间的， 这使得我们能够对结果调用另外一个流操作（例如 forEach） </li>
<li>map() 通过给定的功能将每个元素转换成另一个对象。 以下示例将每个字符串转换成大写字符串。当然你也可以使用 map 将每个对象转换成另一种类型。 </li>
<li>sorted()  返回流的排序视图。元素按照自然顺序进行排序，除非传递了一个自定义的比较器。 </li>
</ul>
</li>
<li><p>终端操作 如collect  forEach count 即不会返回流对象的操作。</p>
<ul>
<li><p>forEach()  该方法有助于迭代流的所有元素，并对他们中的每一个执行一些操作。 改操作作为 lambda 表达式参数传递 </p>
</li>
<li><p>collect()  collect() 方法用于从一个 stream 中接收元素，并将他们存储在一个集合中，并通过参数分类。 </p>
</li>
<li><p>match()  各种匹配操作检查某个断言条件是否与流匹配。所有这些操作都是终端并返回一个 Boolean 结果 </p>
</li>
<li><p>findAny() 将会返回当前流中的任意元素</p>
</li>
<li><p>count 返回符合给定谓词条件的总数</p>
</li>
<li><p>reduce（）<strong>归约</strong> 将一个流中的元素进行组合起来。函数式编程语言的术语来讲就是折叠。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; intList= new ArrayList&lt;&gt;();</span><br><span class="line">/**</span><br><span class="line">* 归约</span><br><span class="line">*/</span><br><span class="line">for (int k = 0; k &lt; 20; k++) &#123;</span><br><span class="line">intList.add(k);</span><br><span class="line">&#125;</span><br><span class="line">int as=intList.stream().reduce(0,(a,b)-&gt;a+b);</span><br><span class="line">System.out.println(as);</span><br><span class="line">Optional&lt;Integer&gt; as1=intList.stream().reduce(Integer::min);</span><br><span class="line">System.out.println(as1.get());</span><br><span class="line">Optional&lt;Integer&gt; as2=intList.stream().reduce(Integer::max);</span><br><span class="line">System.out.println(as2.get());</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>短路操作 foreach中的continue或者break的效果</p>
<ul>
<li>anyMatch()  一旦满足断言条件，该方法将返回 true。它不会处理任何更多的元素。  括号里面放一个predicate</li>
<li>allMatch（）查看流中的元素是否都能匹配给定的条件</li>
<li>noneMatch（）确保流中 的元素没有和给定的谓词相匹配</li>
<li>findFirst()  该方法将从流返回第一个元素，然后不再处理任何元素。 括号里面放一个predicate</li>
</ul>
</li>
<li><p>额外的一些操作 <strong>怎么感觉越来越像sql</strong></p>
<ul>
<li>distinct() 去重</li>
<li>limit（） 截断长度 也可用在无序流set上</li>
<li>skip（）跳过元素</li>
<li></li>
</ul>
</li>
</ul>
<ul>
<li><p>流的使用</p>
<ul>
<li>一个数据源</li>
<li>一个中间操作链</li>
<li>一个终端操作</li>
</ul>
</li>
<li><p>*<em>流的构建 *</em></p>
<ul>
<li><p>值构建 使用 Stream.of（T）</p>
</li>
<li><p>使用数组Stream.of(val1, val2, val3….)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@SafeVarargs</span><br><span class="line">@SuppressWarnings(&quot;varargs&quot;) // Creating a stream from an array is safe</span><br><span class="line">public static&lt;T&gt; Stream&lt;T&gt; of(T... values) &#123;</span><br><span class="line">    return Arrays.stream(values);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用数组 Stream.of(arrayOfElements) 和上面的其实是同一个api</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@SafeVarargs</span><br><span class="line">@SuppressWarnings(&quot;varargs&quot;) // Creating a stream from an array is safe</span><br><span class="line">public static&lt;T&gt; Stream&lt;T&gt; of(T... values) &#123;</span><br><span class="line">    return Arrays.stream(values);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 someList.stream()</p>
</li>
<li><p>由文件流生成</p>
</li>
<li><p>由函数生成流  使用 Stream.generate(functions ) 或者 Stream.iterate(functions ) 这个生成的是个无限流，函数放在generate()或iterate（）里面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Returns an infinite sequential unordered stream where each element is</span><br><span class="line"> * generated by the provided &#123;@code Supplier&#125;.  This is suitable for</span><br><span class="line"> * generating constant streams, streams of random elements, etc.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of stream elements</span><br><span class="line"> * @param s the &#123;@code Supplier&#125; of generated elements</span><br><span class="line"> * @return a new infinite sequential unordered &#123;@code Stream&#125;</span><br><span class="line"> */</span><br><span class="line">public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s) &#123;</span><br><span class="line">    Objects.requireNonNull(s);</span><br><span class="line">    return StreamSupport.stream(</span><br><span class="line">            new StreamSpliterators.InfiniteSupplyingSpliterator.OfRef&lt;&gt;(Long.MAX_VALUE, s), false);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Returns an infinite sequential ordered &#123;@code Stream&#125; produced by iterative</span><br><span class="line"> * application of a function &#123;@code f&#125; to an initial element &#123;@code seed&#125;,</span><br><span class="line"> * producing a &#123;@code Stream&#125; consisting of &#123;@code seed&#125;, &#123;@code f(seed)&#125;,</span><br><span class="line"> * &#123;@code f(f(seed))&#125;, etc.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;The first element (position &#123;@code 0&#125;) in the &#123;@code Stream&#125; will be</span><br><span class="line"> * the provided &#123;@code seed&#125;.  For &#123;@code n &gt; 0&#125;, the element at position</span><br><span class="line"> * &#123;@code n&#125;, will be the result of applying the function &#123;@code f&#125; to the</span><br><span class="line"> * element at position &#123;@code n - 1&#125;.</span><br><span class="line"> *</span><br><span class="line"> * @param &lt;T&gt; the type of stream elements</span><br><span class="line"> * @param seed the initial element</span><br><span class="line"> * @param f a function to be applied to to the previous element to produce</span><br><span class="line"> *          a new element</span><br><span class="line"> * @return a new sequential &#123;@code Stream&#125;</span><br><span class="line"> */</span><br><span class="line">public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f) &#123;</span><br><span class="line">    Objects.requireNonNull(f);</span><br><span class="line">    final Iterator&lt;T&gt; iterator = new Iterator&lt;T&gt;() &#123;</span><br><span class="line">        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">        T t = (T) Streams.NONE;</span><br><span class="line">    </span><br><span class="line">        @Override</span><br><span class="line">        public boolean hasNext() &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        @Override</span><br><span class="line">        public T next() &#123;</span><br><span class="line">            return t = (t == Streams.NONE) ? seed : f.apply(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(</span><br><span class="line">            iterator,</span><br><span class="line">            Spliterator.ORDERED | Spliterator.IMMUTABLE), false);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>將Streams轉換為其他數據結構</p>
<ul>
<li><p>使用 stream.collect(Collectors.xxx())  或 stream.toArray将 Stream 转换成 set list array</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   	List&lt;Project&gt; l1=datas.stream().filter(p12-&gt;p12.getStar()&gt;3).collect(Collectors.toList());</span><br><span class="line">System.out.println(l1);</span><br><span class="line">Set&lt;Project&gt; s1=datas.stream().filter(p12-&gt;p12.getStar()&gt;3).collect(Collectors.toSet());</span><br><span class="line">System.out.println(s1);</span><br><span class="line">Project[] a1=datas.stream().filter(p12-&gt;p12.getStar()&gt;3).toArray(Project[]::new);</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他一些數據結構的轉換在 stream.collect（Collectors.xxx）裏</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Project&gt; map1 = datas.stream().filter(p12 -&gt; p12.getStar() &gt; 3)</span><br><span class="line">.collect(Collectors.toMap(Project::getLang, Function.identity()));</span><br><span class="line">System.out.println(map1);</span><br><span class="line">Map&lt;String, String&gt; map3 =	datas.stream().filter(p12 -&gt; p12.getStar() &gt; 3)</span><br><span class="line">.collect(Collectors.toMap(Project::getLang, Project::getName));</span><br></pre></td></tr></table></figure>

<ul>
<li><p>用流收集数据</p>
<ul>
<li><p>Collectors.groupingBy分组 二级分组就是将groupBy（）.groupBy（）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, List&lt;Project&gt;&gt; collect = datas.stream().collect(Collectors.groupingBy(Project::getStar));</span><br><span class="line">		collect.forEach((k, v) -&gt; &#123;</span><br><span class="line">			System.out.println(k);</span><br><span class="line">			System.out.println(v);</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>* Collectors.groupingBy分组与mapping同时使用

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">datas.stream().collect(Collectors.groupingBy(Project::getStar, Collectors.mapping(item-&gt; &#123;</span><br><span class="line">    if (item.getStar() == 1) &#123;</span><br><span class="line">    return  item.getStar();</span><br><span class="line">    &#125;</span><br><span class="line">    return 1l;</span><br><span class="line">		&#125;, Collectors.toSet())));</span><br></pre></td></tr></table></figure>


* 流中的最大值，最小值 maxBy,minBy

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Project&gt; popt = datas.stream().collect(Collectors.maxBy(Comparator.comparingInt(Project::getStar)));</span><br><span class="line">		Project project3 = popt.get();</span><br><span class="line">		System.out.println(project3);</span><br><span class="line">		Optional&lt;Project&gt; popt1 = datas.stream().collect(Collectors.minBy(Comparator.comparingInt(Project::getStar)));</span><br><span class="line">		System.out.println(popt1.get());</span><br></pre></td></tr></table></figure>


* 汇总 summingInt

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer count2 = datas.stream().collect(Collectors.summingInt(Project::getStar));</span><br><span class="line">    System.out.println(count2);</span><br></pre></td></tr></table></figure>


* 链接字符串 需要先用map将元素对象的某个属性提取出来。 joining

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = datas.stream().map(Project::getLang).collect(Collectors.joining(&quot;,&quot;));</span><br><span class="line">System.out.println(str);</span><br></pre></td></tr></table></figure>


* 分区 多级分区 使用链式编程 partitioningBy（）.partitioningBy()

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Boolean, List&lt;Project&gt;&gt; collect3 = datas.stream().collect(Collectors.partitioningBy((Project pro)-&gt; pro.getStar()&gt;3));</span><br><span class="line">		collect3.forEach((k,v)-&gt;&#123;</span><br><span class="line">			System.out.println(k);</span><br><span class="line">			System.out.println(v.toString());</span><br><span class="line">		&#125;);</span><br></pre></td></tr></table></figure>


  **TODO:并行流，组合异步，Fork/Join分治框架，时间新api**</code></pre>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"># Java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/16/rust-mod与pub与引用模块/" rel="next" title="rust-mod与pub与引用模块">
                <i class="fa fa-chevron-left"></i> rust-mod与pub与引用模块
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/07/RabbitMq在Ubuntu中的安装配置/" rel="prev" title="RabbitMq在Ubuntu中的安装配置">
                RabbitMq在Ubuntu中的安装配置 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/p829173265.jpg" alt="Andreby">
          <p class="site-author-name" itemprop="name">Andreby</p>
           
              <p class="site-description motion-element" itemprop="description">如果有什么需要明天做的事 最好现在开始做</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">61</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#Lambda表达式"><span class="nav-number">1.</span> <span class="nav-text">Lambda表达式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数式编程中的方法引用。"><span class="nav-number">2.</span> <span class="nav-text">函数式编程中的方法引用。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#默认方法与静态方法："><span class="nav-number">3.</span> <span class="nav-text">默认方法与静态方法：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数式接口"><span class="nav-number">4.</span> <span class="nav-text">函数式接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Optional"><span class="nav-number">5.</span> <span class="nav-text">Optional</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#流"><span class="nav-number">6.</span> <span class="nav-text">流</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Andreby</span>
</div>

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
